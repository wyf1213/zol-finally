"use strict";requirejs.config({baseUrl:"./js",urlArgs:"va="+(new Date).getTime(),paths:{jquery:["./lib/jquery-1.11.1.min"],"jquery.validate":["./lib/jquery.validate"],"additional-methods":["./lib/additional-methods"],"jquery.cookie":["./lib/jquery.cookie"]}}),requirejs(["jquery","jquery.validate","jquery.cookie"],function(n,e,i){n(function(){n(".login_content .login_header span").on("click",function(){n(this).addClass("current").siblings("span").removeClass("current"),$index=n(this).index(),n(".login_content .login_body li").eq($index).show().siblings("li").hide()}),n("form").validate({rules:{uname:{required:!0},upwd:{required:!0}},messages:{uname:{required:"手机号不能为空"},upwd:{required:"密码不能为空"}},submitHandler:function(){return n.ajax({url:"./../server/login.php",type:"post",dataType:"json",data:n("form").serialize()}).then(function(r){if(1==r.status){sessionStorage.setItem("login",JSON.stringify(r.data));var t=[],e=JSON.parse(n.cookie("cartInfo")||"[]"),a=0;if(e.forEach(function(e,i){e.uId=r.data.uid,t.push(n.ajax({url:"./../server/cart.php",data:e,type:"post"})),a++}),console.log(a),a>=e.length)return n.cookie("cartInfo","",{expires:-1e3}),alert("登录成功"),void(location="index.html")}else 0==r.status?(n(".login_user i").css({display:"block"}),n(".login_user i").html("用户名或密码错误，请重新登录")):alert("不支持get请求")}),!1}})})});